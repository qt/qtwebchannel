<html>
    <head>
        <script type="text/javascript" src="qrc:///qwebchannel/qwebchannel.js"></script>
        <script type="text/javascript" src="testsetup.js"></script>
        <script type="text/javascript">
            //BEGIN SETUP
            createWebChannel(function(channel) {
                myFactory.create("testObj", function(obj) {
                    window[obj.objectName] = obj;
                    obj.mySignal.connect(function(arg1, arg2) {
                        channel.exec({label: "signalReceived", args: [arg1, arg2]});
                    });
                    obj.myProperty = 42;
                    obj.myMethod("foobar");
                });
                channel.subscribe("triggerDelete", function() {
                    testObj.deleteLater();
                });
                channel.subscribe("report", function() {
                    channel.exec({label:"report", obj: testObj})
                });
            });
            //END SETUP
        </script>
    </head>
    <body>
    </body>
</html>
